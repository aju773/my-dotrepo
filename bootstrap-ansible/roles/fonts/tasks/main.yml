---
- name: Create fonts directory
  file:
    path: "/home/{{ user_name }}/.local/share/fonts"
    state: directory
    mode: 0755
    owner: "{{ user_name }}"
    group: "{{ user_name }}"

- name: Ensure unzip is installed
  dnf:
    name: unzip
    state: present

- name: Download JetBrains Mono Nerd Font
  get_url:
    url: "{{ nerd_font_url }}"
    dest: "/tmp/JetBrainsMono.zip"
    mode: '0644'

- name: Extract JetBrains Mono Nerd Font
  command: unzip -o /tmp/JetBrainsMono.zip -d {{ home_dir }}/.local/share/fonts
  args: 
    creates: "{{ home_dir }}/.local/share/fonts/JetBrains Mono Nerd Font Complete.ttf"

- name: Clean up font zip
  file:
    path: "/tmp/JetBrainsMono.zip"
    state: absent
