---
- name: Ensure stow is installed
  dnf:
    name: stow
    state: present
  become: yes

- name: Ensure dotfiles directory exists
  file:
    path: "{{ dotfiles_dir }}"
    state: directory

- name: Symlink dotfiles using stow CLI
  command: stow -v -d "{{ dotfiles_dir }}" -t "{{ ansible_env.HOME }}" *
  args:
    chdir: "{{ dotfiles_dir }}"
